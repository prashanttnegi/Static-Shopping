<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add to cart</title>
    <link rel="stylesheet" href="\static\style.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz" crossorigin="anonymous"></script>
</head>
<body>
    <header class="d-none d-lg-block">
        <div id="main-header">
            <div class="d-flex flex-wrap align-items-center justify-content-center justify-content-lg-start">
                <div class="styled-text" style="font-family: 'FontName', Algerian;font-size: 36px;color: white;margin-right:10px">
                    <h1>My Store</h1>
                </div>
                
                <ul class="nav col-12 col-lg-auto me-lg-auto mb-2 justify-content-center mb-md-0" >
                    <li><a href="/?user={{user.id}}" class="nav-link px-2 text-white" style="margin-right: 20px">Home</a></li>
                    {%if user.active == 1 %}            
                        <li><a href="/profile/{{user.id}}" class="nav-link px-2 text-white" style="margin-right: 20px">Profile</a></li>
                    {% endif %}
                    <li><a href="/about?user={{user.id}}" class="nav-link px-2 text-white" style="margin-right: 20px">About</a></li>
                </ul>
            
                <div class="text-end" style="margin-bottom:10px ; margin-top:10px">
                    {%if user.active == 1 %}            
                        <a class="btn btn-outline-light me-2" href="/cart/{{user.id}}" role="button">Cart</a>     
                        <a class="btn btn-outline-light me-2" href="/logout/{{user.id}}" role="button">Logout</a>              
                    {%else%}
                    <a class="btn btn-outline-light me-2" href="/admin_login" role="button">Login</a>
                    {% endif %}
                </div>
            </div>
        </div>
    </header>
    <header class="d-block d-lg-none">
      <div id="main-header" class="text-center">
        <div class="d-flex align-items-center justify-content-between">
          <div style="flex: 0 0 auto; margin: -5px;">
            <button class="btn btn-outline-light" style="margin: 10px;" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasWithBothOptions" aria-controls="offcanvasWithBothOptions">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-list" viewBox="0 0 16 16">
                <path fill-rule="evenodd" d="M2.5 12a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5z"/>
              </svg>
            </button>
            <button onclick="window.location.href='/?user={{user.id}}'" class="btn  " >
              <div class="styled-text" style="font-family: 'FontName', Algerian;font-size: 36px;color: white;margin-right:10px">
                  <h1>My Store</h1>
              </div>
            </button>
          </div>
        
          <div style="flex: 0 0 auto;">
            {% if user.active == 1 %}
              <button class="btn btn-outline-light" style="margin: 10px;" onclick="window.location.href='/cart/{{user.id}}'" type="button">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-cart" viewBox="0 0 16 16">
                  <path d="M0 1.5A.5.5 0 0 1 .5 1H2a.5.5 0 0 1 .485.379L2.89 3H14.5a.5.5 0 0 1 .491.592l-1.5 8A.5.5 0 0 1 13 12H4a.5.5 0 0 1-.491-.408L2.01 3.607 1.61 2H.5a.5.5 0 0 1-.5-.5zM3.102 4l1.313 7h8.17l1.313-7H3.102zM5 12a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm7 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm-7 1a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm7 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"/>
                </svg>
              </button>
            {% endif %}
          </div>
        </div>
  
        <div class="offcanvas offcanvas-start" data-bs-scroll="true" tabindex="-1" id="offcanvasWithBothOptions" style="width:50%" aria-labelledby="offcanvasWithBothOptionsLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="offcanvasWithBothOptionsLabel"></h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <ul class="nav flex-column">
              <li class="nav-item"><a href="/?user={{user.id}}"  class="nav-link active" aria-current="page" style="margin-right: 20px">Home</a></li>
              {%if user.active == 1 %}            
                <li class="nav-item"><a href="/profile/{{user.id}}" class="nav-link" style="margin-right: 20px">Profile</a></li>
                <li class="nav-item"><a href="/about?user={{user.id}}" class="nav-link" style="margin-right: 20px">About</a></li>
                <li class="nav-item"><a href="/logout/{{user.id}}" class="nav-link" style="margin-right: 20px">Logout</a></li>
              {%else%}
                <li class="nav-item"><a href="/about" class="nav-link" style="margin-right: 20px">About</a></li>
                <li class="nav-item"><a class="nav-link" href="/user_login" role="button">Login</a></li>
                <li class="nav-item"><a class="nav-link" href="/register" role="button">Register</a></li>
              {% endif %}
            </ul>
          </div>
        </div>
      </div>
    </header>
    <br>
    <br>
    <div class="container main-body">
      <div class="row justify-content-center">
        <div class="col-md-6">
          <div class="card">
            <div class="card-body">
                {%if error%}
                    <div class="card">
                        <div class="card-body">
                            <h4>{{error}}</h4>
                        </div>
                    </div>
                {%endif%}
                <h3 style="margin-top: 30px" class="card-title">{{product.product_name}}-{{product.category.name}}</h3>
                <br>
                {%if product.quantity > 0%}
                    <h5>Availibilty : {{product.quantity}}</h5>
                {%else%}
                    <h5>Availibilty : Out Of Stock</h5>
                {%endif%}
                <br>
                <form action="/add_cart/{{user.id}}/{{product.id}}", enctype="multipart/form-data", method='POST'>
                    <div class="row g-3 align-items-center">
                        <div class="col">
                            <div class="row g-3 align-items-center">
                                <div class="col-auto">
                                <label for="quantity" class="col-form-label">Quantity</label>
                                </div>
                                <div class="col-auto">
                                <input type="number" class="form-control" name="quantity" oninput="updatePlaceholder()" placeholder="Enter the quantity" required>
                                </div>
                            </div>
                            <br>
                            <div class="row g-3 align-items-center">
                                <div class="col-auto">
                                    <label for="price" class="form-label">Price</label>
                                </div>
                                <div class="col-auto">
                                    <input class="form-control" name="rate" style="text-align: right; width: 100px; height: 30px;" type="number" disabled placeholder={{product.rate}}>
                                </div>
                            </div>
                            <br>
                            <div class="row g-3 align-items-center">
                                <div class="col-auto">
                                <label for="total" class="col-form-label">Total</label>
                                </div>
                                <div class="col-auto">
                                <input type="number" class="form-control" name="total" placeholder="â‚¹ 0" disabled>
                                </div>
                            </div>
                        </div>
                        <div class="col-auto">
                            <img src="{{ url_for('display_image_product', product_id=product.id) }}" class="product-image" alt="Image">
                        </div>
                    </div>
                    <br>
                    {%if product.quantity > 0%}
                        <button type="submit" value="Upload" class="btn btn-primary">Add to Cart</button>
                    {%else%}
                        <button type="submit" value="Upload" class="btn btn-primary" disabled>Out of stock</button>
                    {%endif%}
                </form>
            </div>
          </div>
        </div>
      </div>
    </div>
    <script src="\static\interact.js"></script>
</body>
</html>